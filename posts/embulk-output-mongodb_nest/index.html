<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="embulk mongodb output plugin ê°œë°œ" /><meta name="author" content="í•˜ì–€ëˆˆê¸¸" /><meta property="og:locale" content="en" /><meta name="description" content="embulk-output-mongodb í”ŒëŸ¬ê·¸ì¸ì´ ê³µì‹ì‚¬ì´íŠ¸ì—ì„œ ë§í¬ê°€ ì£½ì—ˆêµ°ìš”. gem repository ì—ì„œ installì€ ê°€ëŠ¥í•˜ì§€ë§Œ, íšŒì‚¬ì—ì„œ ì‚¬ìš©í•˜ê¸° ì¢€ ë­ í•´ì„œ ê·¸ëƒ¥ ë§Œë“¤ì–´ ë´¤ìŠµë‹ˆë‹¤. ì°¸.. ì‰½ë„¤ìš” ğŸ˜‰" /><meta property="og:description" content="embulk-output-mongodb í”ŒëŸ¬ê·¸ì¸ì´ ê³µì‹ì‚¬ì´íŠ¸ì—ì„œ ë§í¬ê°€ ì£½ì—ˆêµ°ìš”. gem repository ì—ì„œ installì€ ê°€ëŠ¥í•˜ì§€ë§Œ, íšŒì‚¬ì—ì„œ ì‚¬ìš©í•˜ê¸° ì¢€ ë­ í•´ì„œ ê·¸ëƒ¥ ë§Œë“¤ì–´ ë´¤ìŠµë‹ˆë‹¤. ì°¸.. ì‰½ë„¤ìš” ğŸ˜‰" /><link rel="canonical" href="https://www.irgroup.org/posts/embulk-output-mongodb_nest/" /><meta property="og:url" content="https://www.irgroup.org/posts/embulk-output-mongodb_nest/" /><meta property="og:site_name" content="í•˜ì–€ëˆˆê¸¸ ë¸”ë¡œê·¸" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-05-31T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="embulk mongodb output plugin ê°œë°œ" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@í•˜ì–€ëˆˆê¸¸" /><meta name="google-site-verification" content="i7DonAsg2XevX1vbo0yJyGpmzhwsylBrYop20xy_Z48" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"í•˜ì–€ëˆˆê¸¸"},"headline":"embulk mongodb output plugin ê°œë°œ","dateModified":"2021-12-27T18:05:38+09:00","datePublished":"2018-05-31T00:00:00+09:00","description":"embulk-output-mongodb í”ŒëŸ¬ê·¸ì¸ì´ ê³µì‹ì‚¬ì´íŠ¸ì—ì„œ ë§í¬ê°€ ì£½ì—ˆêµ°ìš”. gem repository ì—ì„œ installì€ ê°€ëŠ¥í•˜ì§€ë§Œ, íšŒì‚¬ì—ì„œ ì‚¬ìš©í•˜ê¸° ì¢€ ë­ í•´ì„œ ê·¸ëƒ¥ ë§Œë“¤ì–´ ë´¤ìŠµë‹ˆë‹¤. ì°¸.. ì‰½ë„¤ìš” ğŸ˜‰","url":"https://www.irgroup.org/posts/embulk-output-mongodb_nest/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.irgroup.org/posts/embulk-output-mongodb_nest/"},"@context":"https://schema.org"}</script><title>embulk mongodb output plugin ê°œë°œ | í•˜ì–€ëˆˆê¸¸ ë¸”ë¡œê·¸</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="í•˜ì–€ëˆˆê¸¸ ë¸”ë¡œê·¸"><meta name="application-name" content="í•˜ì–€ëˆˆê¸¸ ë¸”ë¡œê·¸"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8993100314477491" crossorigin="anonymous"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/ir.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">í•˜ì–€ëˆˆê¸¸ ë¸”ë¡œê·¸</a></div><div class="site-subtitle" style="letter-spacing: -0.02em;">ë°˜ê°‘ìŠµë‹ˆë‹¤. í•˜ì–€ëˆˆê¸¸ì…ë‹ˆë‹¤.<br> ìŠì–´ë²„ë¦¬ê¸° ì „ì— ê¸°ë¡í•˜ë ¤ í•©ë‹ˆë‹¤.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/focuschange" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://www.facebook.com/focuschange" aria-label="facebook" target="_blank" rel="noopener"> <i class="fab fa-facebook"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['focuschange','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>embulk mongodb output plugin ê°œë°œ</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>embulk mongodb output plugin ê°œë°œ</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/focuschange">í•˜ì–€ëˆˆê¸¸</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2018-05-31 00:00:00 +0900" data-toggle="tooltip" data-placement="bottom" title="Thu, May 31, 2018, 12:00 AM +0900" >May 31, 2018</em> </span> <span> Updated <em class="timeago" date="2021-12-27 18:05:38 +0900 " data-toggle="tooltip" data-placement="bottom" title="Mon, Dec 27, 2021, 6:05 PM +0900" >Dec 27, 2021</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2634 words"> <em>14 min</em> read</span></div></div></div><div class="post-content"><blockquote><p>embulk-output-mongodb í”ŒëŸ¬ê·¸ì¸ì´ ê³µì‹ì‚¬ì´íŠ¸ì—ì„œ ë§í¬ê°€ ì£½ì—ˆêµ°ìš”. gem repository ì—ì„œ installì€ ê°€ëŠ¥í•˜ì§€ë§Œ, íšŒì‚¬ì—ì„œ ì‚¬ìš©í•˜ê¸° ì¢€ ë­ í•´ì„œ ê·¸ëƒ¥ ë§Œë“¤ì–´ ë´¤ìŠµë‹ˆë‹¤. ì°¸.. ì‰½ë„¤ìš” ğŸ˜‰</p></blockquote><div class="card"> <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8993100314477491" crossorigin="anonymous"></script> <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-8993100314477491" data-ad-slot="6115278830"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></div><h2 id="ê°œë°œ-ë°©ë²•">ê°œë°œ ë°©ë²•<a href="#ê°œë°œ-ë°©ë²•"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li>embulk ì‹ ê·œ í”„ë¡œì íŠ¸ ìƒì„±<li>í”„ë¡œì íŠ¸ ë¹Œë”©<li>ì‘ì—…ê²°ê³¼ í™•ì¸<li>mongodb client ì½”ë“œ ì‘ì„±</ol><h2 id="1-embulkë¡œ-ì‹ ê·œ-í”„ë¡œì íŠ¸-ìƒì„±">1. embulkë¡œ ì‹ ê·œ í”„ë¡œì íŠ¸ ìƒì„±<a href="#1-embulkë¡œ-ì‹ ê·œ-í”„ë¡œì íŠ¸-ìƒì„±"><i class="fas fa-hashtag"></i></a></h2></h2><p>embulkê°€ ê¸°ë³¸ì ì¸ í”ŒëŸ¬ê·¸ì¸ í”„ë¡œì íŠ¸ì˜ í…œí”Œë¦¿ ì½”ë“œ ë° í”„ë¡œì íŠ¸ ìì²´ë¥¼ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤. ìƒë‹¹íˆ ê°„í¸í•˜ë”êµ°ìš”. javaì™€ ruby ë‘ê°€ì§€ì´ë‹ˆ ì…ë§›ì— ë§ê²Œ ì„ íƒí•´ì„œ ë§Œë“¤ë©´ ë˜êµ¬ìš”. ì €ëŠ” javaë¡œ ë§Œë“¤ì–´ ë´¤ìŠµë‹ˆë‹¤.</p><p>ì•„ë˜ ëª…ë ¹ìœ¼ë¡œ ê°„ë‹¨íˆ ìƒì„± ë©ë‹ˆë‹¤.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>$ embulk new &lt;type&gt; &lt;name&gt;
</pre></table></code></div></div><p>typeì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p><div class="table-wrapper"><table><thead><tr><th>type<th>description<th>example<tbody><tr><td>java-input<td>Java record input plugin<td>mysql<tr><td>java-output<td>Java record output plugin<td>mysql<tr><td>java-filter<td>Java record filter plugin<td>add-hostname<tr><td>java-file-input<td>Java file input plugin<td>ftp<tr><td>java-file-output<td>Java file output plugin<td>ftp<tr><td>java-parser<td>Java file parser plugin<td>csv<tr><td>java-formatter<td>Java file formatter plugin<td>csv<tr><td>java-decoder<td>Java file decoder plugin<td>gzip<tr><td>java-encoder<td>Java file encoder plugin<td>gzip<tr><td>ruby-input<td>Ruby record input plugin<td>mysql<tr><td>ruby-output<td>Ruby record output plugin<td>mysql<tr><td>ruby-filter<td>Ruby record filter plugin<td>add-hostname<tr><td>ruby-parser<td>Ruby file parser plugin<td>csv<tr><td>ruby-formatter<td>Ruby file formatter plugin<td>csv</table></div><p>java output pluginì„ ë§Œë“¤ê±°ë‹ˆ ë‹¤ìŒê³¼ ê°™ì´ ì…ë ¥í•˜ì˜€ìŠµë‹ˆë‹¤.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>$ embulk new java-output embulk_nest
</pre></table></code></div></div><p>plugin ëª…ì¹­ì„ â€œembulk_nestâ€ë¡œ ì¡ì•˜ìŠµë‹ˆë‹¤. ë‚˜ì¤‘ì— ì‹¤í–‰ì‹œí‚¬ë•ŒëŠ” â€œembulk-output-embulk_nestâ€ë¡œ ë  ê²ƒì´ê¸°ì—, ì¤‘ê°„ì— â€œ_â€œë¥¼ ë„£ì—ˆìŠµë‹ˆë‹¤.</p><h2 id="2-í”„ë¡œì íŠ¸-ë¹Œë”©">2. í”„ë¡œì íŠ¸ ë¹Œë”©<a href="#2-í”„ë¡œì íŠ¸-ë¹Œë”©"><i class="fas fa-hashtag"></i></a></h2></h2><p>ê°„ë‹¨íˆ í”„ë¡œì íŠ¸ê°€ ìƒì„±ë˜ë©´, ë‹¤ìŒ ëª…ë ¹ì„ í†µí•´ ë¹Œë”©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>$ cd embulk-output-embulk_nest
$ ./gradlew package
</pre></table></code></div></div><p>gradleì„ ì‚¬ìš©í•˜ê³  ìˆì–´ì„œ intellijì—ì„œ ì§ì ‘í•˜ë ¤ í–ˆëŠ”ë°, ì„¸íŒ…ì´ ì˜ ì•ˆ ë§ë„¤ìš”. ê·¸ëƒ¥ ì»¤ë§¨ë“œ ë¼ì¸ì—ì„œ ì‘ì—…í•˜ëŠ” ê²ƒì´ í¸í•©ë‹ˆë‹¤.</p><h2 id="3-ì‘ì—…-ê²°ê³¼-í™•ì¸">3. ì‘ì—… ê²°ê³¼ í™•ì¸<a href="#3-ì‘ì—…-ê²°ê³¼-í™•ì¸"><i class="fas fa-hashtag"></i></a></h2></h2><p>íŒ¨í‚¤ì§€ê°€ ë§Œë“¤ì–´ì¡Œìœ¼ë©´ ì‘ì—… ë‚´ìš©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>$ embulk run -L ./embulk-output-mongodb_nest config.yml
</pre></table></code></div></div><p>config.ymlì„ ëŒ€ì¶© ë§Œë“¤ì–´ì„œ ëŒë ¤ë³´ë‹ˆ ê·¸ëƒ¥ ì˜ ëŒì•„ ê°‘ë‹ˆë‹¤. ë¬¼ë¡  ì•„ë¬´ ì‘ì—…ë„ ì•ˆí•˜ì§€ë§Œì„œë„..</p><p>ì—¬ê¸°ê¹Œì§€ ëìœ¼ë©´ ê±°ì˜ ëë‚¬ë‹¤ê³  ë³´ë©´ ë©ë‹ˆë‹¤.</p><h2 id="4-mongodb-client-ì½”ë“œ-ì‘ì„±">4. mongodb client ì½”ë“œ ì‘ì„±<a href="#4-mongodb-client-ì½”ë“œ-ì‘ì„±"><i class="fas fa-hashtag"></i></a></h2></h2><p><strong>MongodbNestOutputPlugin.java ìˆ˜ì •</strong></p><p>ì‚¬ì‹¤ mongodbë¥¼ ì‚¬ìš©í•´ ë³´ì§€ ì•Šì•„ì„œ ì˜¤íˆë ¤ ì—¬ê¸°ë¶€í„° ì¢€ ì‹œê°„ì„ ì¡ì•„ë¨¹ì—ˆìŠµë‹ˆë‹¤. ì• ì´ˆë¶€í„° mysqlê°™ì€ í”Œë«í•œ ë°ì´í„°ë¥¼ sub documentê°€ ê°€ëŠ¥í•˜ê²Œ mongodbë¡œ ë„£ê¸° ìœ„í•œ ì‘ì—…ì´ì—ˆê¸°ì— ì¢€ í—¤ë§¸ë„¤ìš”. ì•„ë¬´íŠ¼ ì•„ë˜ ì†ŒìŠ¤ì— ì½”ë”©ì„ ì‹œì‘í•˜ë©´ ë©ë‹ˆë‹¤.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>íŒŒì¼ ìœ„ì¹˜ : src/org/embulk/*
</pre></table></code></div></div><p>ì‹¤ì œ ìˆ˜ì •í•  íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ì´ ë§Œë“¤ì–´ì ¸ ìˆë„¤ìš”.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>src/main/java/org/embulk/output/mongodb_nest/MongodbNestOutputPlugin.java
</pre></table></code></div></div><p>íƒ¬í”Œë¦¿ì—ëŠ” ëª‡ê°œì˜ ë©”ì†Œë“œì™€ ì¸í„°í˜ì´ìŠ¤ê°€ ë§Œë“¤ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.</p><div class="table-wrapper"><table><thead><tr><th>ë©”ì†Œë“œ<th>ê¸°ëŠ¥<tbody><tr><td>PluginTask<td>config.ymlì˜ ì„¤ì •ê°’ì„ ì…ë ¥ë°›ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤<tr><td>transaction<td>transactionì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ê¸°ë³¸ ë©”ì†Œë“œ<tr><td>resume<td>resumeì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ ë©”ì†Œë“œ<tr><td>cleanup<td>cleanupì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ ë©”ì†Œë“œ<tr><td>open<td>ì‹¤ì œ output pluginì˜ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ë©”ì†Œë“œ</table></div><p>mongodbì˜ ê¸°ë³¸ì ì¸ ì„¤ì • ì •ë³´ë¥¼ ë‹´ê¸° ìœ„í•´ PluginTask interfaceë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
</pre><td class="rouge-code"><pre> <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">DefineChildDocument</span> <span class="kd">extends</span> <span class="nc">Task</span>  
   <span class="o">{</span>  
      <span class="nd">@Config</span><span class="o">(</span><span class="s">"name"</span><span class="o">)</span>  
      <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">();</span>  
  
  <span class="nd">@Config</span><span class="o">(</span><span class="s">"field"</span><span class="o">)</span>  
      <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getField</span><span class="o">();</span>  
  <span class="o">}</span>  
  
   <span class="kd">public</span> <span class="kd">interface</span> <span class="nc">PluginTask</span> <span class="kd">extends</span> <span class="nc">Task</span>  
   <span class="o">{</span>  
      <span class="nd">@Config</span><span class="o">(</span><span class="s">"collection"</span><span class="o">)</span>  
      <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getCollection</span><span class="o">();</span>  
  
  <span class="nd">@Config</span><span class="o">(</span><span class="s">"host"</span><span class="o">)</span>  
      <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getHost</span><span class="o">();</span>  
  
  <span class="nd">@Config</span><span class="o">(</span><span class="s">"port"</span><span class="o">)</span>  
      <span class="nd">@ConfigDefault</span><span class="o">(</span><span class="s">"27017"</span><span class="o">)</span>  
      <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getPort</span><span class="o">();</span>  
  
  <span class="nd">@Config</span><span class="o">(</span><span class="s">"database"</span><span class="o">)</span>  
      <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getDatabase</span><span class="o">();</span>  
  
  <span class="nd">@Config</span><span class="o">(</span><span class="s">"user"</span><span class="o">)</span>  
      <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getUser</span><span class="o">();</span>  
  
  <span class="nd">@Config</span><span class="o">(</span><span class="s">"password"</span><span class="o">)</span>  
      <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPassword</span><span class="o">();</span>  
  
  <span class="nd">@Config</span><span class="o">(</span><span class="s">"key"</span><span class="o">)</span>  
      <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getKey</span><span class="o">();</span>  
  
  <span class="nd">@Config</span><span class="o">(</span><span class="s">"child"</span><span class="o">)</span>  
      <span class="nd">@ConfigDefault</span><span class="o">(</span><span class="s">"null"</span><span class="o">)</span>  
      <span class="kd">public</span> <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">DefineChildDocument</span><span class="o">&gt;&gt;</span> <span class="nf">getChild</span><span class="o">();</span>  
  
  <span class="nd">@Config</span><span class="o">(</span><span class="s">"bulk_size"</span><span class="o">)</span>  
      <span class="nd">@ConfigDefault</span><span class="o">(</span><span class="s">"1000"</span><span class="o">)</span>  
      <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getBulkSize</span><span class="o">();</span>  
  
  <span class="o">}</span>  

</pre></table></code></div></div><p>ì°¸ê³ í•  ì ì€ ì„ íƒ ì˜µì…˜ì¸ ê²½ìš°ëŠ” â€œ@ConfigDefaultâ€ë¥¼ ì‘ì„±í•´ ì£¼ë©´ ëœë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì—†ëŠ” ê²½ìš°ëŠ” í•„ìˆ˜ í•­ëª©ì´ ë˜ì–´ ë°˜ë“œì‹œ config.ymlì— ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ì£¼ì˜í•  ê²ƒì€, ì„ íƒí•­ëª©ì¸ë°, ê¸°ë³¸ê°’ì´ í•„ìš” ì—†ëŠ” ê²½ìš°ëŠ” â€œnullâ€ë¡œ ì£¼ë©´ ë©ë‹ˆë‹¤. â€œâ€ ì´ëŸ°ì‹ìœ¼ë¡œ ì£¼ë©´ ì—ëŸ¬ê°€ ë‚˜ë”êµ°ìš”</p><p>mongodb ì ‘ì† ì •ë³´ë¥¼ urlë¡œ ì…ë ¥í•  ìˆ˜ë„ ìˆëŠ”ë°, ë¬¸ì œëŠ” â€˜@â€™ì™€ ê°™ì€ íŠ¹ìˆ˜ë¬¸ìê°€ ê¸°ë³¸ ì •ë³´ì— ë“¤ì–´ ìˆìœ¼ë©´ mongodb clientì—ì„œ ì—ëŸ¬ê°€ ë‚©ë‹ˆë‹¤. url encodingì„ í•˜ë©´ ë˜ëŠ”ë°, ì¢€ ë” í¸ë¦¬í•˜ê²Œ í•˜ë ¤ê³ , í•„ë“œë“¤ì„ ëª¨ë‘ ì˜ë¼ì„œ ì…ë ¥í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.</p><p>ê¸°ë³¸ì ì¸ ì ‘ì† ì •ë³´ì™€ í•¨ê»˜, childë¼ëŠ” í•„ë“œë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. nested ë˜ëŠ” ë„íë©˜íŠ¸ë¥¼ ì •ì˜í•˜ê¸° ìœ„í•¨ì´êµ¬ìš”. nameìœ¼ë¡œ sub document í•„ë“œëª…ì„, fieldë¡œ inputì—ì„œ ë°›ì€ í•„ë“œëª…ì„ ì…ë ¥í•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤. ê°™ì€ nameì´ ì„¤ì •ë  ê²½ìš°ëŠ” í•˜ë‚˜ì˜ sub documentì— ë“¤ì–´ê°€ë„ë¡ êµ¬ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.</p><p>ë‘ë²ˆì§¸ë¡œ bulk_sizeë¥¼ ë§Œë“¤ì—ˆëŠ”ë°, ì‹œìŠ¤í…œ ìì›ì— ë”°ë¼ ì•Œì•„ì„œ ì“°ë©´ ë˜ê² ì§€ìš”.</p><p>configëŠ” ì¡ì•˜ìœ¼ë‹ˆ.. ì‹¤ì œ ìˆ˜í–‰í•  ëª¸ì²´ë¥¼ êµ¬í˜„í•˜ë©´ ë˜ê² ì§€ìš”.</p><p>open ë©”ì†Œë“œë¥¼ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nd">@Override</span> 
<span class="kd">public</span> <span class="nc">TransactionalPageOutput</span> <span class="nf">open</span><span class="o">(</span><span class="nc">TaskSource</span> <span class="n">taskSource</span><span class="o">,</span> <span class="nc">Schema</span> <span class="n">schema</span><span class="o">,</span> <span class="kt">int</span> <span class="n">taskIndex</span><span class="o">)</span>  
<span class="o">{</span>  
   <span class="nc">PluginTask</span> <span class="n">task</span> <span class="o">=</span> <span class="n">taskSource</span><span class="o">.</span><span class="na">loadTask</span><span class="o">(</span><span class="nc">PluginTask</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>  
  
 <span class="k">return</span> <span class="k">new</span> <span class="nf">PluginPageOutput</span><span class="o">(</span><span class="n">task</span><span class="o">,</span> <span class="n">schema</span><span class="o">);</span>  
<span class="o">}</span>
</pre></table></code></div></div><p><strong>PluginPageOutput.java ì¶”ê°€</strong></p><p>PluginPageOutput í´ë˜ìŠ¤ëŠ” TransactionalPageOutput í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ ì•„ë˜ì™€ ê°™ì´ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
</pre><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.embulk.output.mongodb_nest</span><span class="o">;</span>  
  
<span class="kn">import</span> <span class="nn">com.mongodb.BasicDBObject</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">com.mongodb.client.MongoClient</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">com.mongodb.client.MongoClients</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">com.mongodb.client.MongoCollection</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">com.mongodb.client.MongoDatabase</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">com.mongodb.client.model.ReplaceOneModel</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">com.mongodb.client.model.ReplaceOptions</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">com.mongodb.client.model.WriteModel</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">org.bson.Document</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">org.embulk.config.TaskReport</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">org.embulk.spi.*</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">org.embulk.spi.time.Timestamp</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">org.slf4j.Logger</span><span class="o">;</span>  
  
<span class="kn">import</span> <span class="nn">java.io.UnsupportedEncodingException</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.net.URLEncoder</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>  
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>  
  
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PluginPageOutput</span> <span class="kd">implements</span> <span class="nc">TransactionalPageOutput</span>  
<span class="o">{</span>  
   <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="nc">Exec</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="nc">MongodbNestOutputPlugin</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>  
  
 <span class="kd">private</span> <span class="kd">final</span> <span class="nc">MongodbNestOutputPlugin</span><span class="o">.</span><span class="na">PluginTask</span> <span class="n">task</span><span class="o">;</span>  
 <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Schema</span>                             <span class="n">schema</span><span class="o">;</span>  
 <span class="kd">private</span> <span class="kd">final</span> <span class="nc">PageReader</span>                         <span class="n">pageReader</span><span class="o">;</span>  
  
 <span class="kd">private</span> <span class="nc">MongoClient</span>               <span class="n">mongo</span><span class="o">;</span>  
 <span class="kd">private</span> <span class="nc">MongoDatabase</span>             <span class="n">db</span><span class="o">;</span>  
 <span class="kd">private</span> <span class="nc">MongoCollection</span><span class="o">&lt;</span><span class="nc">Document</span><span class="o">&gt;</span> <span class="n">collection</span><span class="o">;</span>  
  
  <span class="nc">PluginPageOutput</span><span class="o">(</span><span class="nc">MongodbNestOutputPlugin</span><span class="o">.</span><span class="na">PluginTask</span> <span class="n">task</span><span class="o">,</span> <span class="nc">Schema</span> <span class="n">schema</span><span class="o">)</span>  
   <span class="o">{</span>  
      <span class="k">this</span><span class="o">.</span><span class="na">pageReader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PageReader</span><span class="o">(</span><span class="n">schema</span><span class="o">);</span>  
 <span class="k">this</span><span class="o">.</span><span class="na">schema</span> <span class="o">=</span> <span class="n">schema</span><span class="o">;</span>  
 <span class="k">this</span><span class="o">.</span><span class="na">task</span> <span class="o">=</span> <span class="n">task</span><span class="o">;</span>  
  
  <span class="nc">String</span> <span class="n">connectionStr</span> <span class="o">=</span> <span class="s">"mongodb://"</span><span class="o">;</span>  
  
 <span class="k">if</span> <span class="o">(</span><span class="n">task</span><span class="o">.</span><span class="na">getUser</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>  
      <span class="o">{</span>  
         <span class="n">connectionStr</span> <span class="o">+=</span> <span class="n">task</span><span class="o">.</span><span class="na">getUser</span><span class="o">();</span>  
 <span class="k">try</span>  <span class="o">{</span>  
            <span class="n">connectionStr</span> <span class="o">+=</span> <span class="s">":"</span> <span class="o">+</span> <span class="nc">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="n">task</span><span class="o">.</span><span class="na">getPassword</span><span class="o">(),</span> <span class="s">"UTF-8"</span><span class="o">)</span> <span class="o">+</span> <span class="s">"@"</span><span class="o">;</span>  
  <span class="o">}</span>  
         <span class="k">catch</span> <span class="o">(</span><span class="nc">UnsupportedEncodingException</span> <span class="n">e</span><span class="o">)</span>  
         <span class="o">{</span>  
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>  
  <span class="o">}</span>  
      <span class="o">}</span>  
  
      <span class="n">connectionStr</span> <span class="o">+=</span> <span class="n">task</span><span class="o">.</span><span class="na">getHost</span><span class="o">()</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="n">task</span><span class="o">.</span><span class="na">getPort</span><span class="o">()</span> <span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">task</span><span class="o">.</span><span class="na">getDatabase</span><span class="o">();</span>  
  
 <span class="k">this</span><span class="o">.</span><span class="na">mongo</span> <span class="o">=</span> <span class="nc">MongoClients</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">connectionStr</span><span class="o">);</span>  
 <span class="k">this</span><span class="o">.</span><span class="na">db</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">mongo</span><span class="o">.</span><span class="na">getDatabase</span><span class="o">(</span><span class="n">task</span><span class="o">.</span><span class="na">getDatabase</span><span class="o">());</span>  
 <span class="k">this</span><span class="o">.</span><span class="na">collection</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">db</span><span class="o">.</span><span class="na">getCollection</span><span class="o">(</span><span class="n">task</span><span class="o">.</span><span class="na">getCollection</span><span class="o">());</span>  
  <span class="o">}</span>  
  
   <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="nc">Page</span> <span class="n">page</span><span class="o">)</span>  
   <span class="o">{</span>  
      <span class="n">pageReader</span><span class="o">.</span><span class="na">setPage</span><span class="o">(</span><span class="n">page</span><span class="o">);</span>  
  <span class="nc">List</span><span class="o">&lt;</span><span class="nc">WriteModel</span><span class="o">&lt;</span><span class="nc">Document</span><span class="o">&gt;&gt;</span> <span class="n">replaceModel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>  
  
 <span class="k">while</span> <span class="o">(</span><span class="n">pageReader</span><span class="o">.</span><span class="na">nextRecord</span><span class="o">())</span>  
      <span class="o">{</span>  
         <span class="nc">BasicDBObject</span> <span class="n">doc</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BasicDBObject</span><span class="o">();</span>  
  
 <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">schema</span><span class="o">.</span><span class="na">getColumnCount</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span>  
         <span class="o">{</span>  
            <span class="nc">String</span> <span class="n">t</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="na">getColumnName</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>  
  <span class="nc">Class</span><span class="o">&lt;?&gt;</span> <span class="n">type</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="na">getColumnType</span><span class="o">(</span><span class="n">i</span><span class="o">).</span><span class="na">getJavaType</span><span class="o">();</span>  
  
 <span class="k">if</span> <span class="o">(</span><span class="n">pageReader</span><span class="o">.</span><span class="na">isNull</span><span class="o">(</span><span class="n">i</span><span class="o">))</span>  
            <span class="o">{</span>  
               <span class="n">doc</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">t</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>  
  <span class="o">}</span>  
            <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="kt">boolean</span><span class="o">.</span><span class="na">class</span><span class="o">))</span>  
            <span class="o">{</span>  
               <span class="n">doc</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">t</span><span class="o">,</span> <span class="n">pageReader</span><span class="o">.</span><span class="na">getBoolean</span><span class="o">(</span><span class="n">i</span><span class="o">));</span>  
  <span class="o">}</span>  
            <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="kt">double</span><span class="o">.</span><span class="na">class</span><span class="o">))</span>  
            <span class="o">{</span>  
               <span class="n">doc</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">t</span><span class="o">,</span> <span class="n">pageReader</span><span class="o">.</span><span class="na">getDouble</span><span class="o">(</span><span class="n">i</span><span class="o">));</span>  
  <span class="o">}</span>  
            <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="kt">long</span><span class="o">.</span><span class="na">class</span><span class="o">))</span>  
            <span class="o">{</span>  
               <span class="n">doc</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">t</span><span class="o">,</span> <span class="n">pageReader</span><span class="o">.</span><span class="na">getLong</span><span class="o">(</span><span class="n">i</span><span class="o">));</span>  
  <span class="o">}</span>  
            <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">))</span>  
            <span class="o">{</span>  
               <span class="n">doc</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">t</span><span class="o">,</span> <span class="n">pageReader</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">i</span><span class="o">));</span>  
  <span class="o">}</span>  
            <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="nc">Timestamp</span><span class="o">.</span><span class="na">class</span><span class="o">))</span>  
            <span class="o">{</span>  
               <span class="n">doc</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">t</span><span class="o">,</span> <span class="k">new</span> <span class="n">java</span><span class="o">.</span><span class="na">sql</span><span class="o">.</span><span class="na">Timestamp</span><span class="o">(</span><span class="n">pageReader</span><span class="o">.</span><span class="na">getTimestamp</span><span class="o">(</span><span class="n">i</span><span class="o">).</span><span class="na">toEpochMilli</span><span class="o">()));</span>  
  <span class="o">}</span>  
         <span class="o">}</span>  
  
         <span class="k">if</span> <span class="o">(</span><span class="n">task</span><span class="o">.</span><span class="na">getChild</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>  
         <span class="o">{</span>  
            <span class="n">doc</span> <span class="o">=</span> <span class="n">transformDocument</span><span class="o">(</span><span class="n">doc</span><span class="o">);</span>  
  <span class="o">}</span>  
  
         <span class="n">replaceModel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">ReplaceOneModel</span><span class="o">&lt;&gt;(</span>  
               <span class="k">new</span> <span class="nf">Document</span><span class="o">(</span><span class="n">task</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">doc</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">task</span><span class="o">.</span><span class="na">getKey</span><span class="o">())),</span>  
 <span class="k">new</span> <span class="nf">Document</span><span class="o">(</span><span class="n">doc</span><span class="o">),</span>  
 <span class="k">new</span> <span class="nf">ReplaceOptions</span><span class="o">().</span><span class="na">upsert</span><span class="o">(</span><span class="kc">true</span><span class="o">))</span>  
         <span class="o">);</span>  
  
 <span class="k">if</span><span class="o">(</span><span class="n">replaceModel</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">%</span> <span class="n">task</span><span class="o">.</span><span class="na">getBulkSize</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>  
         <span class="o">{</span>  
            <span class="n">collection</span><span class="o">.</span><span class="na">bulkWrite</span><span class="o">(</span><span class="n">replaceModel</span><span class="o">);</span>  
  <span class="n">replaceModel</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>  
  <span class="o">}</span>  
      <span class="o">}</span>  
  
      <span class="k">if</span> <span class="o">(</span><span class="n">replaceModel</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>  
      <span class="o">{</span>  
         <span class="n">collection</span><span class="o">.</span><span class="na">bulkWrite</span><span class="o">(</span><span class="n">replaceModel</span><span class="o">);</span>  
  <span class="o">}</span>  
  
   <span class="o">}</span>  
  
   <span class="kd">private</span> <span class="nc">BasicDBObject</span> <span class="nf">transformDocument</span><span class="o">(</span><span class="nc">BasicDBObject</span> <span class="n">doc</span><span class="o">)</span>  
   <span class="o">{</span>  
      <span class="k">for</span> <span class="o">(</span><span class="nc">MongodbNestOutputPlugin</span><span class="o">.</span><span class="na">DefineChildDocument</span> <span class="n">cd</span> <span class="o">:</span> <span class="n">task</span><span class="o">.</span><span class="na">getChild</span><span class="o">().</span><span class="na">get</span><span class="o">())</span>  
      <span class="o">{</span>  
         <span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">cd</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>  
  <span class="nc">String</span> <span class="n">field</span> <span class="o">=</span> <span class="n">cd</span><span class="o">.</span><span class="na">getField</span><span class="o">();</span>  
  
  <span class="nc">BasicDBObject</span> <span class="n">subdoc</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BasicDBObject</span><span class="o">();</span>  
  <span class="nc">Object</span> <span class="n">exists</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>  
  
 <span class="k">if</span> <span class="o">(</span><span class="n">exists</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>  
         <span class="o">{</span>  
            <span class="n">subdoc</span><span class="o">.</span><span class="na">putAll</span><span class="o">((</span><span class="nc">Map</span><span class="o">)</span> <span class="n">exists</span><span class="o">);</span>  
  <span class="o">}</span>  
  
         <span class="n">subdoc</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">field</span><span class="o">,</span> <span class="n">doc</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">field</span><span class="o">));</span>  
  <span class="n">doc</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">subdoc</span><span class="o">);</span>  
  <span class="o">}</span>  
  
      <span class="k">return</span> <span class="n">doc</span><span class="o">;</span>  
  <span class="o">}</span>  
  
   <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">finish</span><span class="o">()</span>  
   <span class="o">{</span>  
  
   <span class="o">}</span>  
  
   <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span>  
   <span class="o">{</span>  
      <span class="k">this</span><span class="o">.</span><span class="na">mongo</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>  
  <span class="o">}</span>  
  
   <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">abort</span><span class="o">()</span>  
   <span class="o">{</span>  
  
   <span class="o">}</span>  
  
   <span class="nd">@Override</span> <span class="kd">public</span> <span class="nc">TaskReport</span> <span class="nf">commit</span><span class="o">()</span>  
   <span class="o">{</span>  
      <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>  
  <span class="o">}</span>  
<span class="o">}</span>
</pre></table></code></div></div><p><em>ìŒ.. ì´ë…¸ë¬´ ë¸”ë¡œê·¸ëŠ” ì†ŒìŠ¤ í´ë”©ì´ ì•ˆë¼!! ëˆ„ê°€ ë„ì›€ ì¢€..</em> :sob:</p><p>TransactionalPageOutput í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ ì½”ë“œë¥¼ ìƒì„±í•˜ì—¬, ëª‡ëª‡ í•„ìˆ˜ ë©”ì†Œë“œë¥¼ overrideí•˜ì—¬ ì‘ì„±í•©ë‹ˆë‹¤.</p><p>ìƒì„±ìì—ì„œ mongodbì— ì ‘ì†í•˜ë„ë¡ í•˜ì˜€ê³ , add methodì—ì„œ í•„ìš”í•œ ì‘ì—…ì„ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤.</p><p>sub documentë¥¼ ë§Œë“¤ê¸° ìœ„í•´, transformDocument ë©”ì†Œë“œë¥¼ ì¶”ê°€í•´ì„œ êµ¬ì¡°ë¥¼ ë³€í˜•í•˜ì˜€ìŠµë‹ˆë‹¤.</p><p><em>ì‚¬ì‹¤, ì½”ë”© ëŠ¥ë ¥ì´ ì¼ì²œí•˜ì—¬ í•˜ë‚˜í•˜ë‚˜ ì„¤ëª…í•˜ê¸°ê°€ ì¢€.. ê·¸ëŸ¬ë„¤ìš”. (ë­.. ë‚˜ë§Œ ì•Œë©´ ë˜ì§€~ :kissing_smiling_eyes:</em></p><p><strong>config.yml ì‘ì„±</strong></p><p>í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ì„œ, embulkì˜ ìƒ˜í”Œ csvë¥¼ inputìœ¼ë¡œí•˜ì—¬ ì‘ì„±í•´ ë´¤ìŠµë‹ˆë‹¤.</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre><td class="rouge-code"><pre><span class="na">in</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">file</span>
  <span class="na">path_prefix</span><span class="pi">:</span> <span class="s">/Users/focuschange/google/program/embulk/./try1/csv/sample_</span>
  <span class="na">decoders</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="pi">{</span><span class="nv">type</span><span class="pi">:</span> <span class="nv">gzip</span><span class="pi">}</span>
  <span class="na">parser</span><span class="pi">:</span>
    <span class="na">charset</span><span class="pi">:</span> <span class="s">UTF-8</span>
    <span class="na">newline</span><span class="pi">:</span> <span class="s">LF</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">csv</span>
    <span class="na">delimiter</span><span class="pi">:</span> <span class="s1">'</span><span class="s">,'</span>
    <span class="na">quote</span><span class="pi">:</span> <span class="s1">'</span><span class="s">"'</span>
    <span class="na">escape</span><span class="pi">:</span> <span class="s1">'</span><span class="s">"'</span>
    <span class="na">null_string</span><span class="pi">:</span> <span class="s1">'</span><span class="s">NULL'</span>
    <span class="na">trim_if_not_quoted</span><span class="pi">:</span> <span class="no">false</span>
    <span class="na">skip_header_lines</span><span class="pi">:</span> <span class="m">1</span>
    <span class="na">allow_extra_columns</span><span class="pi">:</span> <span class="no">false</span>
    <span class="na">allow_optional_columns</span><span class="pi">:</span> <span class="no">false</span>
    <span class="na">columns</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="pi">{</span><span class="nv">name</span><span class="pi">:</span> <span class="nv">id</span><span class="pi">,</span> <span class="nv">type</span><span class="pi">:</span> <span class="nv">long</span><span class="pi">}</span>
    <span class="pi">-</span> <span class="pi">{</span><span class="nv">name</span><span class="pi">:</span> <span class="nv">account</span><span class="pi">,</span> <span class="nv">type</span><span class="pi">:</span> <span class="nv">long</span><span class="pi">}</span>
    <span class="pi">-</span> <span class="pi">{</span><span class="nv">name</span><span class="pi">:</span> <span class="nv">time</span><span class="pi">,</span> <span class="nv">type</span><span class="pi">:</span> <span class="nv">timestamp</span><span class="pi">,</span> <span class="nv">format</span><span class="pi">:</span> <span class="s1">'</span><span class="s">%Y-%m-%d</span><span class="nv"> </span><span class="s">%H:%M:%S'</span><span class="pi">}</span>
    <span class="pi">-</span> <span class="pi">{</span><span class="nv">name</span><span class="pi">:</span> <span class="nv">purchase</span><span class="pi">,</span> <span class="nv">type</span><span class="pi">:</span> <span class="nv">timestamp</span><span class="pi">,</span> <span class="nv">format</span><span class="pi">:</span> <span class="s1">'</span><span class="s">%Y%m%d'</span><span class="pi">}</span>
    <span class="pi">-</span> <span class="pi">{</span><span class="nv">name</span><span class="pi">:</span> <span class="nv">comment</span><span class="pi">,</span> <span class="nv">type</span><span class="pi">:</span> <span class="nv">string</span><span class="pi">}</span>
<span class="na">out</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">mongodb_nest</span>
  <span class="na">host</span><span class="pi">:</span> <span class="s">999.999.999.999</span>
<span class="c1">#  port: 27017</span>
  <span class="na">database</span><span class="pi">:</span> <span class="s">focus</span>
  <span class="na">user</span><span class="pi">:</span> <span class="s">focus</span>
  <span class="na">password</span><span class="pi">:</span> <span class="s">focus@123.456.789</span>
  <span class="na">collection</span><span class="pi">:</span> <span class="s">PluginTest</span>
  <span class="na">key</span><span class="pi">:</span> <span class="s">account</span>
  <span class="na">child</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="pi">{</span><span class="nv">name</span><span class="pi">:</span> <span class="nv">mychild</span><span class="pi">,</span> <span class="nv">field</span><span class="pi">:</span> <span class="nv">time</span><span class="pi">}</span>
  <span class="pi">-</span> <span class="pi">{</span><span class="nv">name</span><span class="pi">:</span> <span class="nv">yourchild</span><span class="pi">,</span> <span class="nv">field</span><span class="pi">:</span> <span class="nv">comment</span><span class="pi">}</span>
  <span class="pi">-</span> <span class="pi">{</span><span class="nv">name</span><span class="pi">:</span> <span class="nv">mychild</span><span class="pi">,</span> <span class="nv">field</span><span class="pi">:</span> <span class="nv">purchase</span><span class="pi">}</span>
</pre></table></code></div></div><p>ì‹¤ì œ ë¡œì»¬ì—ì„œ ìˆ˜í–‰í•´ ë³´ë‹ˆ, mongodbì— ë‹¤ìŒê³¼ ê°™ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤.</p><p><img data-proofer-ignore data-src="http://www.irgroup.org/assets/img/embulk_output_mongodb_nest_test.jpg" alt="enter image description here" /></p><p>child í•„ë“œë¡œ ì‘ì„±í•œ mychild, yourchild ëª¨ë‘ ì˜ ë“¤ì–´ê°”ë„¤ìš”. ì•„ë¬´íŠ¼ ê°„ë‹¨íˆ ì‘ì„±í•´ì„œ í…ŒìŠ¤íŠ¸ í•´ ë³´ë‹ˆ ì˜ ë“¤ì–´ê°‘ë‹ˆë‹¤.</p><h2 id="5-ë°°í¬">5. ë°°í¬<a href="#5-ë°°í¬"><i class="fas fa-hashtag"></i></a></h2></h2><p>í•˜ëŠ”ê¹€ì— ì ¬ ë°°í¬ê¹Œì§€ í•´ ë´¤ìŠµë‹ˆë‹¤. https://rubygems.org ì— ê°€ì…í•˜ê³ , consoleì—ì„œ ë°°í¬í•˜ê¸° ìœ„í•´ ì¸ì¦ê¹Œì§€ ë°›ì•˜ìŠµë‹ˆë‹¤.</p><p>console ì¸ì¦ì€ ê·¸ëƒ¥ ë‹¤ìŒì²˜ëŸ¼ í–ˆìŠµë‹ˆë‹¤.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre> <span class="nv">$ </span>gem push
Enter your RubyGems.org credentials.
Don<span class="s1">'t have an account yet? Create one at https://rubygems.org/sign_up
   Email:   focuschange@gmail.com
Password:

Signed in.
ERROR:  While executing gem ... (Gem::CommandLineError)
    Please specify a gem name on the command line (e.g. gem build GEMNAME)
</span></pre></table></code></div></div><p>emailê³¼ ì•”í˜¸ë¥¼ ì…ë ¥í•˜ë‹ˆ siged in ì„±ê³µí•˜ê³ , â€œ~/.gem/credentialsâ€ íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤. ë­.. ë‹¤ìŒ ì—ëŸ¬ì•¼ ë¬´ì‹œí•˜ê³ .. ì¸ì¦ë°›ì•˜ìœ¼ë©´ ëê³ ~</p><p>ì•„ë˜ ëª…ë ¹ìœ¼ë¡œ gem push í•˜ë©´ ë¹Œë”© ë° ë°°í¬ê°€ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤,</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="nv">$ </span>./gradlew gemPush
....
....
<span class="o">&gt;</span> Task :gem
  Successfully built RubyGem
  Name: embulk-output-mongodb_nest
  Version: 0.1.0
  File: embulk-output-mongodb_nest-0.1.0.gem

<span class="o">&gt;</span> Task :gemPush
Pushing gem to https://rubygems.org...
Successfully registered gem: embulk-output-mongodb_nest <span class="o">(</span>0.1.0<span class="o">)</span>
</pre></table></code></div></div><p>í•„ìš”í•œ ëª¨ë“ˆë“¤ ë‹¤ìš´ë°›ì•„ íŒ¨í‚¤ì§•í•˜ê³ , ìœ„ì— ë©”ì„¸ì§€ì²˜ëŸ¼ gemì— ì˜¬ë¼ê°€ë„¤ìš”.</p><p>https://rubygems.org ì—ì„œ ê²€ìƒ‰í•´ë³´ë‹ˆ, ë‚˜ì˜µë‹ˆë‹¤. ì™€~~</p><h2 id="6-ê²°ë¡ ">6. ê²°ë¡ <a href="#6-ê²°ë¡ "><i class="fas fa-hashtag"></i></a></h2></h2><p>embulkëŠ” ì‚¬ìš©í•˜ë©´ í•  ìˆ˜ë¡ ì°¸ í¸í•˜ë‹¤ëŠ” ìƒê°ì´ ë“œë„¤ìš”. customë„ ìƒë‹¹íˆ ì‰¬ìš´ í¸ì´êµ¬ìš”. ì•„ì§ ëª½ê³ DBë¥¼ ëŠ¥ìˆ™í•˜ê²Œ ì‚¬ìš©í•˜ì§€ ëª»í•˜ê¸° ë•Œë¬¸ì—, ì½”ë“œê°€ ì¢€ ì§€ì €ë¶„í•˜ì§€ë§Œ, ì ì§„ì ìœ¼ë¡œ ê°€ë‹¤ë“¬ìœ¼ë©´ ì“°ëŠ”ë° ë‚˜ì˜ì§€ ì•Šì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì˜¤íˆë ¤ íšŒì‚¬ì—ì„œ ë°©í™”ë²½ ì—´ê³ , ì´ê²ƒì €ê²ƒ ì¤€ë¹„í•˜ëŠ” ì‹œê°„ì´ ë” ê±¸ë¦½ë‹ˆë‹¤.</p><h2 id="ì°¸ê³ ">ì°¸ê³ <a href="#ì°¸ê³ "><i class="fas fa-hashtag"></i></a></h2></h2><ul><li><strong>ì†ŒìŠ¤ì½”ë“œ</strong> : https://github.com/focuschange/embulk-output-mongodb_nest<li><strong>ruby gem</strong> : https://rubygems.org/gems/embulk-output-mongodb_nest<li><strong>embulk customization</strong> : http://www.embulk.org/docs/customization.html</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/tools/'>tools</a>, <a href='/categories/embulk/'>embulk</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/embulk/" class="post-tag no-text-decoration" >embulk</a> <a href="/tags/embulk-output-mongodb-nest/" class="post-tag no-text-decoration" >embulk-output-mongodb_nest</a> <a href="/tags/mongodb/" class="post-tag no-text-decoration" >mongodb</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"></div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=embulk mongodb output plugin ê°œë°œ - í•˜ì–€ëˆˆê¸¸ ë¸”ë¡œê·¸&url=https://www.irgroup.org/posts/embulk-output-mongodb_nest/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=embulk mongodb output plugin ê°œë°œ - í•˜ì–€ëˆˆê¸¸ ë¸”ë¡œê·¸&u=https://www.irgroup.org/posts/embulk-output-mongodb_nest/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=embulk mongodb output plugin ê°œë°œ - í•˜ì–€ëˆˆê¸¸ ë¸”ë¡œê·¸&url=https://www.irgroup.org/posts/embulk-output-mongodb_nest/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div><script src="https://utteranc.es/client.js" repo="focuschange/focuschange.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/usage-markdown/">jekyllì—ì„œ ë§ˆí¬ë‹¤ìš´(Markdown) ì‚¬ìš©í•˜ê¸°</a><li><a href="/posts/jekyll-google-search/">Jekyll í…Œë§ˆì—ì„œ êµ¬ê¸€ ê²€ìƒ‰ ë…¸ì¶œ ë“±ë¡í•˜ê¸°</a><li><a href="/posts/fcm-app-server-1/">FCM push notificationì„ ìœ„í•œ ì•±ì„œë²„ êµ¬í˜„í•˜ê¸° 1 - ê¸°ë³¸ê°œë… ë° core</a><li><a href="/posts/Chirpy-%ED%85%8C%EB%A7%88-%EC%BB%A4%EC%8A%A4%ED%84%B0%EB%A7%88%EC%9D%B4%EC%A7%95/">Chirpy í…Œë§ˆ ì»¤ìŠ¤í„°ë§ˆì´ì§•</a><li><a href="/posts/github-%EC%BB%B4%ED%93%A8%ED%84%B0-%ED%95%9C%EB%8C%80%EB%A1%9C-%EC%97%AC%EB%9F%AC-%EA%B3%84%EC%A0%95-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/">ì»´í“¨í„° í•œëŒ€ë¡œ github ì—¬ëŸ¬ ê³„ì • ì‚¬ìš©í•˜ê¸°</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/chirpy/">chirpy</a> <a class="post-tag" href="/tags/gcp/">gcp</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/app-engine/">app-engine</a> <a class="post-tag" href="/tags/jekyll/">jekyll</a> <a class="post-tag" href="/tags/github/">github</a> <a class="post-tag" href="/tags/embulk/">embulk</a> <a class="post-tag" href="/tags/fcm/">fcm</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/bigquery/">bigquery</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/embulk-bigquery-output/"><div class="card-body"> <em class="timeago small" date="2018-05-11 10:59:10 +0900" >May 11, 2018</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>embulkë¥¼ ì‚¬ìš©í•œ vertica to bigquery ë°©ë²•</h3><div class="text-muted small"><p> ë‹¤ë¥¸ í”Œë«í¼ê°„ì— ë°ì´í„° ì „ì†¡ì´ë‚˜ ETLì„ ìœ„í•´ì„œ ì—¬ëŸ¬ê°€ì§€ íˆ´ì´ ì¡´ì¬í•œë‹¤ê³  í•©ë‹ˆë‹¤. ê·¸ ì¤‘ embulkë¥¼ ì†Œê°œë°›ê²Œ ë˜ì–´ ì‚¬ìš©ì„± í…ŒìŠ¤íŠ¸ë¥¼ í•´ ë´¤ìŠµë‹ˆë‹¤. ë¬¼ë¡  ë§ì€ íˆ´ì„ ì¨ë³¸ ê²½í—˜ì€ ì—†ìœ¼ë‚˜, embulkëŠ” ë¬¼ê±´ì¸ ë“¯ ì‹¶ìŠµë‹ˆë‹¤. ì„¤ì¹˜ë¶€í„° ë°ì´í„° ì „ì†¡ê¹Œì§€ ë‹¨ê³„ì ìœ¼ë¡œ ê¸°ë¡í•´ ë³´ë ¤ í•©ë‹ˆë‹¤. macOS High Sierra ê¸°ì¤€ì…ë‹ˆë‹¤. 1...</p></div></div></a></div><div class="card"> <a href="/posts/mysql-login-path/"><div class="card-body"> <em class="timeago small" date="2018-11-13 00:00:00 +0900" >Nov 13, 2018</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MySQL Login path ì„¤ì •í•˜ê¸°</h3><div class="text-muted small"><p> mysql 5.6ë¶€í„° ë³´ì•ˆ ë¬¸ì œë¡œ ì¸í•´ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì»¤ë§¨ë“œë¼ì¸ì—ì„œ ì§ì ‘ ì…ë ¥í•˜ê¸° ì–´ë ¤ì›Œì¡ŒìŠµë‹ˆë‹¤. ëŒ€ì‹ ì— login pathë¼ëŠ” ê²ƒì„ ì‚¬ìš©í•˜ë©´ ë˜ëŠ”ë°ìš”. ì»¤ë§¨ë“œë¥¼ ìì£¼ ìŠì–´ë²„ë¦¬ë„¤ìš”. â€œWarning: using a password on the command line interface can be insecure. â€œ ì´ëŸ° ë©”ì„¸ì§€ê°€ ì¶œë ¥ë  ë•Œ ì‚¬ìš©í•˜...</p></div></div></a></div><div class="card"> <a href="/posts/favorite-tools/"><div class="card-body"> <em class="timeago small" date="2018-05-18 00:00:00 +0900" >May 18, 2018</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>ê°œë°œì— ìœ ìš©í•œ íˆ´ë“¤</h3><div class="text-muted small"><p> ê°€ë” ì¥ë¹„ë¥¼ êµì²´í•˜ëŠ” ê²½ìš° ì „ì— ì„¤ì¹˜í–ˆë˜ íˆ´ë“¤ì´ ê¸°ì–µì´ ë‚˜ì§€ ì•Šì„ ë•Œê°€ ìˆìŠµë‹ˆë‹¤. ì„¸ì›”ì´ ê°ˆìˆ˜ë¡ ì ì .. ë”.. ê·¸ë˜ì„œ ë‚´ê°€ ì‚¬ìš©í•˜ëŠ” íˆ´ ëª©ë¡ì„ ì •ë¦¬í•´ ë‘ë ¤ í•©ë‹ˆë‹¤. DB Client MYSQL MySQL WorkBench - https://www.mysql.com/products/workbench/ :-1: HeidiS...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/favorite-tools/" class="btn btn-outline-primary" prompt="Older"><p>ê°œë°œì— ìœ ìš©í•œ íˆ´ë“¤</p></a> <a href="/posts/gcp-favorate-url/" class="btn btn-outline-primary" prompt="Newer"><p>gcp ìœ ìš©í•œ ì •ë³´ë“¤</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> Â© 2022 <a href="https://github.com/focuschange">í•˜ì–€ëˆˆê¸¸</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">All rights reserved.</span></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/chirpy/">chirpy</a> <a class="post-tag" href="/tags/gcp/">gcp</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/app-engine/">app-engine</a> <a class="post-tag" href="/tags/jekyll/">jekyll</a> <a class="post-tag" href="/tags/github/">github</a> <a class="post-tag" href="/tags/embulk/">embulk</a> <a class="post-tag" href="/tags/fcm/">fcm</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/bigquery/">bigquery</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-1872238-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-1872238-1'); }); </script> <script data-ad-client="ca-pub-8993100314477491" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
